Ты профессиональный разработчик в сфере AI , LLM и агентов. Необходимо написать следующий проект с использованием языка python и библиотеки langgraph и langchain. 
Сейчас ты буждешь критиком и мы пройдемся по мозговому штурму, чтобы улучшить систему.

Цель:
Создание умной системы текстовой интерактивной среды.

Идея: Пользователь взаимодействует с системой, путём текста (через LLM), система же отвечает пользователю в соответствии с правилами, которые прописаны в ней. 

ОПИСАНИЕ СИСТЕМЫ:
Тема ВКР
Разработка системы генерации и управления текстовыми репрезентациями персонажей и миров на основе современных технологий естественной обработки языка.
Объект исследования
Современные технологии естественной обработки языка (NLP), создающие текстовые репрезентации персонажей и миров.
Предмет исследования
Методы генерации и управления текстовыми репрезентациями персонажей и миров, а также методы обеспечения строгой системы правил взаимодействия между игроком и персонажами, а также между персонажами и событиями.
Цель исследования
Разработка системы, генерирующей текстовые репрезентации персонажей и миров, с акцентом на улучшение логической связности ответов, кратковременной и долговременной памяти, логики взаимодействия агентов и учета таймлайна событий, а также на обеспечение строгой системы правил взаимодействия между игроком и персонажами, а также между персонажами и событиями.
Планируемый результат работы
Создание функциональной системы, генерирующей текстовые репрезентации персонажей и миров, с высокой логической связностью ответов, наличием кратковременной и долговременной памяти, улучшенной логикой взаимодействия агентов и учетом таймлайна событий. Система будет включать строгую систему правил взаимодействия между игроком и персонажами, а также между персонажами и событиями, что позволит создавать более реалистичные и увлекательные текстовые миры. 
Исследовательская глава
1.2.1. Характеристика объекта исследования
Современные технологии естественной обработки языка (NLP), создающие текстовые репрезентации персонажей и миров, предоставляют пользователям возможность погружаться в интерактивные истории и взаимодействовать с виртуальными агентами.
Особенности объекта исследования:
•	Интерактивность: Пользователи могут влиять на ход событий, взаимодействуя с персонажами и окружением.
•	Имитация человеческого поведения: Персонажи демонстрируют различные поведенческие модели, адаптируясь к действиям пользователей.
•	Многоагентность: Система включает нескольких агентов, взаимодействующих между собой и с пользователем.
•	Генерация контента: Создаются динамические диалоги, сцены, локации и сюжетные линии.
•	Адаптивность: Система должна уметь адаптироваться к изменениям данных и предпочтений пользователя.
 
1.2.2. Характеристика предмета исследования
Предметом исследования являются методы генерации и управления текстовыми репрезентациями персонажей и миров, а также методы обеспечения строгой системы правил взаимодействия между игроком и персонажами, а также между персонажами и событиями.
Методы исследования
•	Методы генерации: Алгоритмы и модели для создания текстовых репрезентаций персонажей и миров.
•	Методы управления: Подходы к управлению логической связностью ответов, кратковременной и долговременной памятью, а также учетом таймлайна событий.
•	Методы взаимодействия: Разработка и внедрение строгих правил взаимодействия между игроком и персонажами, а также между персонажами и событиями.
Описание инструментов разработки:
•	Langchain: Предоставляет низкоуровневое взаимодействие, позволяя тонко настраивать логику взаимодействия с LLM.
•	LangGraph: Предназначен для разработки приложений с поддержкой истории чатов и агентов, что делает его удобным для работы с последовательностью действий.
•	AutoGen: Оптимален для работы с большим количеством агентов, обеспечивая удобное управление сложными сценариями.
Модель as is:
Существующие платформы, такие как Character.ai, Gamio.ru, Figgs.ai и AI Dungeon (aidungeon.com), служат примерами текущего состояния технологий. Эти системы обеспечивают базовую генерацию диалогов и контента, но обладают ограничениями в логике и памяти.
 
1.2.3. Идентификация проблемы
Проблемы, существующие в современных системах, требуют разработки новой интерактивной текстовой среды, способной сохранять логическую связность, учитывать таймлайн событий, поддерживать память и предоставлять пользователям адаптивный и последовательный опыт взаимодействия.
Основная проблема заключается в создании масштабируемой, адаптивной и гибкой системы, которая обеспечит эффективное взаимодействие пользователей с виртуальными агентами и миром, учитывая как краткосрочную, так и долгосрочную память, а также сложные цепочки событий. 
 
1.2.4. Анализ существующих решений и обоснование необходимости разработки
Существующие системы, такие как Character.ai, Gamio.ru, Figgs.ai и AI Dungeon, имеют ряд серьезных ограничений, снижающих качество пользовательского опыта и затрудняющих работу разработчиков.
Технологические барьеры
1.	Недостаточная логическая связность ответов.
Системы часто теряют контекст диалога при длительных сессиях взаимодействия, что приводит к разрыву последовательности событий и непоследовательности в поведении персонажей. Например, агент может забыть информацию о ранее упомянутых пользователем событиях или объектах.
2.	Отсутствие кратковременной и долговременной памяти.
Текущие платформы неспособны эффективно запоминать и использовать информацию о предыдущих действиях пользователя. Это приводит к тому, что персонажи воспринимаются как статичные и негибкие, лишенные адаптивности.
3.	Слабая логика взаимодействия агентов.
Недостаток сложной логики для многоагентных взаимодействий делает сценарии однообразными и упрощенными. Например, несколько агентов могут игнорировать друг друга или действовать нелогично в одной сцене.
4.	Игнорирование таймлайна событий.
Системы не учитывают временную последовательность событий. Это создает проблемы в повествовании и развитии сюжета, когда события происходят вне логики времени.
 
Последствия для пользователей
•	Потеря погружения: отсутствие логической последовательности в поведении агентов и мира разрушает иллюзию интерактивности.
•	Раздражение и разочарование: непоследовательные ответы или поведение персонажей снижают уровень удовлетворенности пользователей.
Примеры неудачных сценариев
1.	Сценарий потери контекста.
Пользователь сообщает персонажу важную информацию, но через несколько взаимодействий система "забывает" этот факт. Например, персонаж может не помнить, что ранее вел разговор о квесте, и снова спрашивать те же вопросы.
2.	Несогласованность в действиях агентов.
В сценарии, где несколько агентов взаимодействуют, они могут игнорировать действия друг друга или реагировать нелогично. Например, один агент просит помощи, а другой ведет себя так, будто ничего не произошло.
Заключение:
Существующие решения не обеспечивают достаточной логической связности и адаптивности, что обосновывает необходимость разработки новой интерактивной текстовой среды.
 
1.2.5. Постановка задачи
Формулировка проблемы:
Необходимость создания системы, способной генерировать и управлять текстовыми репрезентациями персонажей и миров, обеспечивая высокую логическую связность ответов, наличие кратковременной и долговременной памяти, улучшенную логику взаимодействия агентов и учет таймлайна событий.
Цель:
Разработка системы, генерирующей текстовые репрезентации персонажей и миров, с акцентом на улучшение логической связности ответов, кратковременной и долговременной памяти, логики взаимодействия агентов и учета таймлайна событий, а также на обеспечение строгой системы правил взаимодействия между игроком и персонажами, а также между персонажами и событиями.
Результат:
Создание функциональной системы, генерирующей текстовые репрезентации персонажей и миров, с высокой логической связностью ответов, наличием кратковременной и долговременной памяти, улучшенной логикой взаимодействия агентов и учетом таймлайна событий. Система будет включать строгую систему правил взаимодействия между игроком и персонажами, а также между персонажами и событиями, что позволит создавать более реалистичные и увлекательные текстовые миры.
Критерии оценки:
•	Логическая связность ответов.
•	Наличие кратковременной и долговременной памяти.
•	Улучшенная логика взаимодействия агентов.
•	Учет таймлайна событий.
•	Строгая система правил взаимодействия между игроком и персонажами, а также между персонажами и событиями.
 
1.2.6. Требования к создаваемому решению
•	Производительность: 
o	наименьшее количество запросов к LLM.
o	наименьшее количество токенов при запросах к LLM и генерации ответов от LLM.
o	реже и эффективнее использовать сохранение в базу знаний.
o	Реже обращаться к базе знаний
•	Точность: Обеспечение точного анализа и генерации действий:
Связность ответов, соблюдение логического взаимодействия между пользователями и виртуальными персонажами.
•	Адаптивность: Возможность адаптации поведения системы при взаимодействии с пользователем.


Задумка решения:
*Решение предполагает использовать Граф знаний.

Подразумевается, что чат бот будет использовать граф знаний для взаимодейсвия с миром игры или истории. Граф знаний даст большую гибкость взаимодейсвия за счет того, что чат-бот сможет сам менять и добавлять связи графа и его ребра (сущности). Также у некоторых сущностей может быть дополнителбьный параметр, указывающий их количество (к примеру, если игрок связан с деньгами, через связь наличие, то в сущности будет указано количество: "Пользователь" -{имеет}-> "Золотая монета {10}")



Этапы:
1. Генерация графа знаний с помощью бибилиотеки (собственная разработка)
2. Создание инструметов
   1. Инструменты изменеия связей (Редактирование, удаление, добавление)
   2. Инструмент получения данных об объекте (что?, где? и с кем связан? (стоит учесть приватность данных, что пользователь может получить только то, что может знать))
   3. Инструмент редактирования параметров сущности
   4. Инстурмент добавления параметров к сущности
3. Создания графа взаимодейстия для пользователя:
Пользователь вводит сообщение -> система проверяет это сообщение на безопасность -> если есть текст выделенный '*' -> система отправляет сообщение в LLM с требованием от модели выбрать инструмент (смена локации, перемещение, осмотр локации, взаимодействие с предметом, взаимодействие с персонажем) -> модель выбирает инструмент и отправляет в него соответствующий запрос -> от инструмента приходит ответ ->  система анализирует ответ инструмента и вызывает следующий инструмент, если пользователь прописал несколько действий. -> После всего система даёт ответ пользователю. 

1. Создание цепочек агентов: использование LangMem для персонажей
2. Запуск цикла с активными персонажами (пользователь -> персонаж 1 -> персонаж 2 -> ... ) - активных персонажей не больше трех




я предлагаю следующую архитектуру для модуля базы данных:
Сделаем 2 коллекции в векторной базе данных: для названия сущностей и описания сущностей (в метаданных хранит имя сущности, а также встраивает имя в описание).
Всего поиска будет 4:
- классический поиск: использует только векторную базу описаний сущностей данных для поиска
- расширенный  поиск: поиск по векторной базе данных названий сущностей , и затем для трех сущностей (настраиваемый параметр) обращается в графовую базу данных с целью получения полной информации по сущности и соседним сущностям с учетом связей (с описанием сущностей и связей)
- быстрый поиск: поиск по векторной базе данных названий сущностей и затем для трех сущностей (настраиваемый параметр) обращение в графовую базу данных с целью получения информации по сущности и соседним сущностям с учетом связей (с описанием связей). Однако в отличии от первого, описание соседних сущностей не нужно.
- глубокий поиск:  использует векторную базу описаний сущностей данных для поиска, затем из метаданных получает имя сущностей для X сущностей (настраиваемый параметр) и обращается в графовую базу данных с целью получения полной информации по сущности и соседним сущностям с учетом связей (с описанием сущностей и связей)

У меня уже имеется модуль для работы с графой базой данных, теперь необходим модуль для работы с векторной базой данных и общий модуль, который будет содержать в себе эти два модуля и иметь методы для поиска